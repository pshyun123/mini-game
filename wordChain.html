<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>끝말잇기</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />
  </head>
  <body>
    <div><span id="order">1</span>번째 참가자</div>
    <div>제시어: <span id="word"></span></div>
    <input type="text" />
    <button>입력</button>
    <script>
      // const number = Number(prompt("참가자는 총 몇명입니까?"));
      // if (number && !isNaN(number) && Number(number)>0){
      //   number = Number(number);
      //   break;
      // } else {
      //   alert ("숫자를 입력해주세요.")
      // }

      while (true) {
        number = prompt("참가자는 총 몇명입니까?");
        if (number && !isNaN(number) && Number(number) > 0) {
          number = Number(number);
          break;
        } else {
          alert("올바른 숫자를 입력하세요.");
        }
      }
      const $input = document.querySelector("input");
      const $button = document.querySelector("button");
      const $word = document.querySelector("#word");
      const $order = document.querySelector("#order");

      let word; // 제시어
      let newWord; // 현재 단어

      const onInput = (event) => {
        newWord = event.target.value;
      };
      const onClickButton = () => {
        // 제시어 비어있거나 입력한 단어가 맞는지?
        // 문자열의 마지막 글자 ?== 새로운 단어의 첫글자
        // 세글자인지 추가!
        if (newWord.length === 3) {
          if (!word || word.at(-1) === newWord[0]) {
            word = newWord; // 입력한 단어가 제시어가 됨
            $word.textContent = word; // 화면에 제시어 표시
            let order = Number($order.textContent); // 현재 순서 파악
            // 순서 부여
            order = order >= number ? 1 : order + 1;
            $order.textContent = order; // 순서를 화면에 반영
          } else {
            alert("틀린 단어입니다. ");
          }
        } else {
          alert("세글자 단어를 입력해주세요.");
        }
        $input.value = "";
        $input.focus(); //
      };
      $input.addEventListener("input", onInput);
      $button.addEventListener("click", onClickButton);
    </script>
  </body>
</html>
